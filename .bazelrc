# Common build flags
build --announce_rc
build --verbose_failures

# iOS specific defaults
build --apple_platform_type=ios
build --ios_minimum_os=17.0
build --apple_generate_dsym

# Release Configuration (Device)
build:release --ios_multi_cpus=arm64
build:release --compilation_mode=opt
build:release --strip=always
build:release --define=release=true

# Output
build --symlink_prefix=bazel-

# Performance
build --experimental_reuse_sandbox_directories
build --worker_sandboxing

# Test configuration
test --test_output=errors
test --ios_multi_cpus=sim_arm64
test --ios_simulator_device="iPhone 15 Pro"
test --ios_simulator_version=18.4
test --test_timeout=900